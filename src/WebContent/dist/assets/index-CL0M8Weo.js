(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const Ne="modulepreload",_e=function(e,t){return new URL(e,t).href},de={},Re=function(t,n,o){let a=Promise.resolve();if(n&&n.length>0){let i=function(u){return Promise.all(u.map(m=>Promise.resolve(m).then(l=>({status:"fulfilled",value:l}),l=>({status:"rejected",reason:l}))))};const r=document.getElementsByTagName("link"),c=document.querySelector("meta[property=csp-nonce]"),g=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=i(n.map(u=>{if(u=_e(u,o),u in de)return;de[u]=!0;const m=u.endsWith(".css"),l=m?'[rel="stylesheet"]':"";if(!!o)for(let A=r.length-1;A>=0;A--){const D=r[A];if(D.href===u&&(!m||D.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${l}`))return;const b=document.createElement("link");if(b.rel=m?"stylesheet":Ne,m||(b.as="script"),b.crossOrigin="",b.href=u,g&&b.setAttribute("nonce",g),document.head.appendChild(b),m)return new Promise((A,D)=>{b.addEventListener("load",A),b.addEventListener("error",()=>D(new Error(`Unable to preload CSS for ${u}`)))})}))}function s(i){const r=new Event("vite:preloadError",{cancelable:!0});if(r.payload=i,window.dispatchEvent(r),!r.defaultPrevented)throw i}return a.then(i=>{for(const r of i||[])r.status==="rejected"&&s(r.reason);return t().catch(s)})},B={queue:[],isVisible:!1},ue=new WeakMap;function y(e){var t;if((t=window.chrome)!=null&&t.webview)try{window.chrome.webview.postMessage(e)}catch(n){console.error("Erro ao enviar mensagem via postMessage:",n)}else console.warn("WebView não está pronto ou disponível para enviar mensagem.")}function T(e,t){e&&(e.disabled=t,e.style.cursor=t?"not-allowed":"pointer")}function X(e,t="success",n=3e3){B.queue.push({message:e,type:t,duration:n}),B.isVisible||he()}function he(){if(B.queue.length===0||B.isVisible)return;B.isVisible=!0;const{message:e,type:t,duration:n}=B.queue.shift(),o=Be(e,t);document.body.appendChild(o),o.offsetHeight,requestAnimationFrame(()=>o.classList.add("show")),setTimeout(()=>{o.classList.remove("show"),o.addEventListener("transitionend",()=>{o.remove(),B.isVisible=!1,setTimeout(he,50)},{once:!0})},n)}function Be(e,t){const n=document.createElement("div");return n.className=`toast-notification ${t}`,n.textContent=e,n}async function be(){if(!navigator.onLine)return!1;try{const e=`https://www.google.com/generate_204?nocache=${Date.now()}`;return await fetch(e,{method:"HEAD",mode:"no-cors",cache:"no-cache"}),!0}catch(e){return console.error("Falha na verificação de conexão:",e),!1}}function we(e,t,n=!1){const o=document.getElementById(e);if(!o)return null;const a=o.cloneNode(!0);return o.replaceWith(a),a.addEventListener("click",s=>{n&&(a.disabled=!0),t(s)}),a}function F({selector:e="[data-tippy-content]",placement:t="top",container:n=document,tippyOptions:o={}}={}){return Re(async()=>{const{default:a}=await import("./tippy.esm-B-T1uisp.js");return{default:a}},[],import.meta.url).then(({default:a})=>{let s=[];typeof e=="string"?s=Array.from(n.querySelectorAll(e)):e instanceof Element?s=[e]:(e instanceof NodeList||Array.isArray(e))&&(s=Array.from(e));const i=s.filter(g=>!ue.has(g));if(i.length===0)return[];const r={placement:t,...o},c=a(i,r);return i.forEach(g=>ue.set(g,!0)),c})}const h={LoadData:0,UpdateEmail:1,UpdateCompactInterface:2,UpdateConfig:3,CreateEnvironment:4,PullGit:5,OpenVS:6,ToggleEnv:7,SelectDirectory:8,ReleaseIP:9,UpdateVersion:10,Reload:11},Me={version:"2.0.0",date:"17 de fev. de 2025",changes:{new:["Adicionado Grau de Inovação no relatório","Adicionar Comentários nos Campos Customizados de Relatório - Os campos customizados dentro dos relatórios agora podem ter comentários, permitindo que os usuários adicionem anotações explicativas diretamente nos campos."],improvement:["Deixamos somente uma opção de Correlações dos Campos Customizados exibindo data de última atualização nas respostas dos Campos Customizados."],correction:["Corrigida permissão de Visualizar Projetos - Ajuste realizado para garantir que apenas usuários com as permissões corretas possam visualizar projetos dentro do sistema."]}},Oe=Object.freeze(Object.defineProperty({__proto__:null,default:Me},Symbol.toStringTag,{value:"Module"})),$e={version:"2.0.1",date:"17 de fev. de 2025",changes:{new:["Adicionado Grau de Inovação no relatório","Adicionar Comentários nos Campos Customizados de Relatório - Os campos customizados dentro dos relatórios agora podem ter comentários, permitindo que os usuários adicionem anotações explicativas diretamente nos campos."],improvement:["Deixamos somente uma opção de Correlações dos Campos Customizados exibindo data de última atualização nas respostas dos Campos Customizados."],correction:["Corrigida permissão de Visualizar Projetos - Ajuste realizado para garantir que apenas usuários com as permissões corretas possam visualizar projetos dentro do sistema."]}},qe=Object.freeze(Object.defineProperty({__proto__:null,default:$e},Symbol.toStringTag,{value:"Module"})),ke=`<div class="modal-release-notes" id="releaseNotesModal" style="display: none;">\r
  <div class="modal-content">\r
    <div class="modal-header">\r
      <h2 class="modal-title">Notas de Versão</h2>\r
      <button class="modal-close" id="btnCloseReleaseNotes"><i class="fas fa-times"\r
          data-tippy-content="Fechar"></i></button>\r
    </div>\r
    <div class="modal-body">\r
      <div class="release-notes-container">\r
        <div id="releaseNotesContent" class="release-notes-content"></div>\r
      </div>\r
    </div>\r
    <div class="modal-footer">\r
      <button class="btn btn-secondary" id="btnCloseReleaseNotesFooter">Fechar</button>\r
    </div>\r
  </div>\r
</div>`,xe=Object.assign({"./versions/2.0.0.js":Oe,"./versions/2.0.1.js":qe});function Ge(e,t){const n=e.split(".").map(Number),o=t.split(".").map(Number);for(let a=0;a<n.length;a++){if(n[a]>o[a])return-1;if(n[a]<o[a])return 1}return 0}function Ve(e){const t=Object.values(xe).map(n=>n.default);t.sort((n,o)=>Ge(n.version,o.version)),e.innerHTML="",t.forEach((n,o)=>{const a=document.createElement("div");a.classList.add("version-section");const s=document.createElement("div");s.classList.add("version-header");const i=document.createElement("span");i.classList.add("version-number"),o===0?(i.classList.add("latest"),i.innerHTML=`
        <i class="fas fa-bookmark"></i>
        <i class="fas fa-fire-flame-curved"></i>
        V${n.version}
      `):i.innerHTML=`
        <i class="fas fa-bookmark"></i>
        V${n.version}
      `;const r=document.createElement("span");if(r.classList.add("version-date"),r.textContent=n.date,s.appendChild(i),s.appendChild(r),a.appendChild(s),n.changes.new&&n.changes.new.length>0){const c=document.createElement("div");c.classList.add("change-category");const g=document.createElement("h3");g.classList.add("category-title","category-new");const u=document.createElement("span");u.classList.add("category-badge"),u.textContent="Novo",g.appendChild(u),c.appendChild(g);const m=document.createElement("ul");n.changes.new.forEach(l=>{const p=document.createElement("li");p.textContent=l,m.appendChild(p)}),c.appendChild(m),a.appendChild(c)}if(n.changes.improvement&&n.changes.improvement.length>0){const c=document.createElement("div");c.classList.add("change-category");const g=document.createElement("h3");g.classList.add("category-title","category-improvement");const u=document.createElement("span");u.classList.add("category-badge"),u.textContent="Melhoria",g.appendChild(u),c.appendChild(g);const m=document.createElement("ul");n.changes.improvement.forEach(l=>{const p=document.createElement("li");p.textContent=l,m.appendChild(p)}),c.appendChild(m),a.appendChild(c)}if(n.changes.correction&&n.changes.correction.length>0){const c=document.createElement("div");c.classList.add("change-category");const g=document.createElement("h3");g.classList.add("category-title","category-correction");const u=document.createElement("span");u.classList.add("category-badge"),u.textContent="Correção",g.appendChild(u),c.appendChild(g);const m=document.createElement("ul");n.changes.correction.forEach(l=>{const p=document.createElement("li");p.textContent=l,m.appendChild(p)}),c.appendChild(m),a.appendChild(c)}e.appendChild(a)})}function De(){const e=document.createElement("div");e.innerHTML=ke;const t=e.querySelector("#releaseNotesModal");if(!t)return console.error("Elemento do modal não encontrado no HTML"),null;document.body.appendChild(t);const n=t.querySelector("#releaseNotesContent");n&&Ve(n),F({container:t});const o=t.querySelector(".modal-close"),a=t.querySelector("#btnCloseReleaseNotesFooter"),s=()=>{t.style.display="none";try{document.body.contains(t)&&document.body.removeChild(t)}catch(i){console.warn("Erro ao fechar modal de release notes:",i)}};return o&&o.addEventListener("click",s),a&&a.addEventListener("click",s),{element:t,show:()=>t.style.display="flex",close:s}}const He={Local:0,Stage:1,Homolog:2,Prod:3},I={IpReleased:0,IpBlocked:1,CheckingIp:2,ReleasingIp:3},Ue=`<div class="config-scroll">\r
  <div class="config-form">\r
    <div class="config-section">\r
      <div class="input-group">\r
        <label class="input-label">Email institucional</label>\r
        <input type="email" class="input-field" id="modalEmail" placeholder="Digite seu email">\r
        <p class="input-help">Este e-mail é necessário para verificar suas credenciais de acesso aos sistemas.</p>\r
      </div>\r
      <div class="input-group compact-toggle">\r
        <div class="toggle-header">\r
          <label class="input-label">Modo compacto de exibição</label>\r
          <div class="toggle-wrapper">\r
            <input type="checkbox" id="compactInterfaceToggle" class="toggle-input">\r
            <label for="compactInterfaceToggle" class="toggle-label"></label>\r
          </div>\r
        </div>\r
        <p class="input-help">Com a opção habilitada, é possível visualizar até 6 aplicações por vez; se desabilitada,\r
          são exibidas 8.</p>\r
      </div>\r
    </div>\r
  </div>\r
</div>`,O={MODAL_EMAIL:"modalEmail",COMPACT_INTERFACE_TOGGLE:"compactInterfaceToggle"};function ze(){return Ue}function Fe(e){const t=document.getElementById("txtEmail"),n=e.querySelector(`#${O.MODAL_EMAIL}`),o=e.querySelector(`#${O.COMPACT_INTERFACE_TOGGLE}`);P("email",(t==null?void 0:t.value)||""),P("compactInterface",$),o&&(o.checked=$),t&&n&&(n.value=t.value),n&&n.addEventListener("input",()=>pe("email",n.value)),o&&o.addEventListener("change",()=>{pe("compactInterface",o.checked)})}function pe(e,t){const n=C[e]??(e==="compactInterface"?!1:"");String(t)!==String(n)?d.has(e)||d.add(e):d.has(e)&&d.delete(e),_()}function je(e){const t=e.querySelector(`#${O.MODAL_EMAIL}`),n=e.querySelector(`#${O.COMPACT_INTERFACE_TOGGLE}`);return{email:t?t.value:null,compactInterface:n?n.checked:null}}function Ee(e=d){const t=document.getElementById(O.MODAL_EMAIL),n=document.getElementById(O.COMPACT_INTERFACE_TOGGLE);e.forEach(o=>{try{o==="email"&&t?(t.value=C.email??"",d.delete("email")):o==="compactInterface"&&n&&(n.checked=C.compactInterface??$,d.delete("compactInterface"))}catch(a){console.error(`Erro ao reverter campo ${o}:`,a)}}),_()}const We={BTN_SAVE_SETTINGS:"btnSaveSettings"},d=new Set;let H="",Q="",N=null;function Z(e){H=e}function K(e){Q=e}function ee(e){N=e}function _(){const e=document.getElementById(We.BTN_SAVE_SETTINGS);if(e){const t=d.size>0;e.disabled=!t,e.style.opacity=t?"1":"0.5"}}function Je(e){const t=new Set(["email","compactInterface"]),n=new Set([...e].filter(o=>o==="appName"||o==="appPath"||o.startsWith("param:")));[...e].some(o=>t.has(o))&&Ee(e),n.size>0&&j(n),_()}function Ye(){Ee(d),j(d),d.clear(),_()}const Xe=`<div class="params-two-column-layout">\r
  <div class="params-sidebar">\r
    <div class="select-group">\r
      <label class="input-label">Aplicação:</label>\r
      <select class="input-field" id="appSelector"></select>\r
    </div>\r
    <div class="select-group">\r
      <label class="input-label">Ambiente:</label>\r
      <select class="input-field" id="envSelector">\r
        <option value="Local">Local</option>\r
        <option value="Stage">Stage</option>\r
        <option value="Homolog">Homolog</option>\r
        <option value="Prod">Prod</option>\r
      </select>\r
    </div>\r
  </div>\r
  <div class="params-content">\r
    <div class="config-scroll">\r
      <div class="config-form">\r
        <div class="config-section">\r
          <h4 class="section-title">Configurações da Aplicação</h4>\r
          <div class="input-group">\r
            <label class="input-label">Nome da Aplicação</label>\r
            <input type="text" class="input-field" id="appName" placeholder="Nome da aplicação">\r
          </div>\r
          <div class="input-group">\r
            <label class="input-label">Caminho da Aplicação</label>\r
            <input type="text" class="input-field" id="appPath" placeholder="C:\\\\Pasta\\\\Subpasta\\\\src\\\\App.api">\r
          </div>\r
        </div>\r
        <div class="config-section">\r
          <h4 class="section-title" id="ambienteTitle">Parâmetros do Ambiente: Local</h4>\r
          <div id="parametrosContainer"></div>\r
        </div>\r
      </div>\r
    </div>\r
  </div>\r
</div>`,v={APP_SELECTOR:"appSelector",ENV_SELECTOR:"envSelector",APP_NAME:"appName",APP_PATH:"appPath",PARAMETROS_CONTAINER:"parametrosContainer",BTN_CRIAR_AMBIENTE:"btnCriarAmbiente"};function Qe(){return Xe}function Ze(e,t){const n=e.querySelector(`#${v.APP_SELECTOR}`),o=e.querySelector(`#${v.ENV_SELECTOR}`),a=e.querySelector(`#${v.APP_NAME}`),s=e.querySelector(`#${v.APP_PATH}`);Ke(n),w(e),n&&(n.addEventListener("focus",()=>at(n)),n.addEventListener("change",()=>tt(e,t))),o&&(o.addEventListener("focus",()=>ot(o)),o.addEventListener("change",()=>nt(e,t))),a&&a.addEventListener("input",()=>te("appName",a.value)),s&&s.addEventListener("input",()=>te("appPath",s.value))}function Ke(e){if(!e)return"";const t=H;e.innerHTML="",f.forEach(o=>{const a=document.createElement("option");a.value=o.name,a.textContent=o.name+(o.fileExists?"":" (Indisponível)"),e.appendChild(a)});let n="";return f.some(o=>o.name===t)?(e.value=t,n=t):f.length>0&&(e.value=f[0].name,n=f[0].name),n}function w(e){const t=e.querySelector(`#${v.APP_SELECTOR}`),n=e.querySelector(`#${v.ENV_SELECTOR}`),o=e.querySelector(`#${v.PARAMETROS_CONTAINER}`),a=e.querySelector(`#${v.APP_NAME}`),s=e.querySelector(`#${v.APP_PATH}`),i=e.querySelector("#ambienteTitle");if(!t||!n||!o||!a||!s||!i)return;const r=t.value,c=n.value,g=c.toLowerCase();i.textContent=`Parâmetros do Ambiente: ${c}`;const u=f.find(l=>l.name===r);if(u)a.value=u.name||"",s.value=u.path||"",P("appName",u.name||""),P("appPath",u.path||"");else{a.value="",s.value="",o.innerHTML='<p class="no-params">Selecione uma aplicação válida.</p>';return}const m=u?u[g]:null;if(m===null||typeof m=="object"&&Object.keys(m).length===0){P("params",{}),o.innerHTML=`
      <p class="no-params">Parâmetros indisponíveis para este ambiente.</p>
      <button class="btn btn-primary smt1" id="${v.BTN_CRIAR_AMBIENTE}">
        <i class="fas fa-plus"></i> Criar ambiente ${c}
      </button>
    `;const l=e.querySelector(`#${v.BTN_CRIAR_AMBIENTE}`);if(l){l.replaceWith(l.cloneNode(!0));const p=e.querySelector(`#${v.BTN_CRIAR_AMBIENTE}`);p.addEventListener("click",()=>{p.innerHTML=`<i class="fas fa-spinner icon-spin"></i> Criando ambiente ${c}...`,p.disabled=!0,y({action:h.CreateEnvironment,app:{name:r,environment:c}})})}}else{P("params",{...m});let l="";for(const[p,b]of Object.entries(m))l+=`
        <div class="input-group">
          <label class="input-label" title="${p}">${p}</label>
          <div class="input-wrapper">
            <input type="text" class="input-field" data-key="${p}" value="${b||""}" placeholder="${p}">
            <button class="btn-clear" title="Limpar valor"><i class="fas fa-times"></i></button>
          </div>
        </div>
      `;o.innerHTML=l,o.querySelectorAll("input.input-field").forEach(p=>{p.addEventListener("input",()=>te(`param:${p.dataset.key}`,p.value))}),o.querySelectorAll(".btn-clear").forEach(p=>{const b=p.cloneNode(!0);p.replaceWith(b),b.addEventListener("click",()=>{const A=b.previousElementSibling;A&&(A.value="",A.dispatchEvent(new Event("input",{bubbles:!0})))})})}_()}function te(e,t){var a;let n;if(e.startsWith("param:")){const s=e.substring(6);n=((a=C.params)==null?void 0:a[s])??""}else n=C[e]??"";String(t)!==String(n)?d.has(e)||d.add(e):d.has(e)&&d.delete(e),_()}function et(e){const t=e.querySelector(`#${v.APP_SELECTOR}`),n=e.querySelector(`#${v.ENV_SELECTOR}`),o=e.querySelector(`#${v.APP_NAME}`),a=e.querySelector(`#${v.APP_PATH}`),s=e.querySelector(`#${v.PARAMETROS_CONTAINER}`);if(!t||!n||!o||!a||!s)return null;const i={};return s.querySelectorAll("input[data-key]").forEach(r=>{i[r.dataset.key]=r.value}),{selectedApp:t.value,selectedEnv:n.value.toLowerCase(),newName:o.value,newPath:a.value,params:i}}function j(e=d){const t=document.getElementById(v.APP_NAME),n=document.getElementById(v.APP_PATH),o=document.getElementById(v.PARAMETROS_CONTAINER);e.forEach(a=>{var s;try{if(a==="appName"&&t)t.value=C.appName??"",d.delete("appName");else if(a==="appPath"&&n)n.value=C.appPath??"",d.delete("appPath");else if(a.startsWith("param:")&&o){const i=a.substring(6),r=o.querySelector(`input[data-key="${i}"]`);r&&(r.value=((s=C.params)==null?void 0:s[i])??"",d.delete(a))}}catch(i){console.error(`Erro ao reverter campo ${a}:`,i)}}),_()}function tt(e,t){const n=e.querySelector(`#${v.APP_SELECTOR}`);if(!n)return;const o=n.value;if(o===H)return;n.value=H;const a=new Set([...d].filter(s=>s==="appName"||s==="appPath"||s.startsWith("param:")));a.size>0?t(()=>{j(a),n.value=o,Z(o),w(e)},()=>{},a):(n.value=o,Z(o),w(e))}function nt(e,t){const n=e.querySelector(`#${v.ENV_SELECTOR}`);if(!n)return;const o=n.value;if(o===Q)return;n.value=Q;const a=new Set([...d].filter(s=>s==="appName"||s==="appPath"||s.startsWith("param:")));a.size>0?t(()=>{j(a),n.value=o,K(o),w(e)},()=>{},a):(n.value=o,K(o),w(e))}function at(e){e&&Z(e.value)}function ot(e){e&&K(e.value)}const st="Erro no Git",it="Ocorreu um erro ao executar o comando Git.",rt=[{pattern:/Your configuration specifies to merge with the ref ['"]([^'"]+)['"][\s\S]*?but no such ref was fetched/i,title:"Branch não encontrada",description:e=>`A branch '${e[1].replace("refs/heads/","")}' não foi encontrada no repositório remoto. Verifique se o nome da branch está correto e se ela existe no servidor.`},{pattern:/fatal: unable to access.+Could not resolve host/i,title:"Erro de conexão",description:"Não foi possível conectar ao servidor Git. Verifique sua conexão com a internet e as configurações de DNS."},{pattern:/fatal: unable to access.+Failed to connect.+Connection timed out/i,title:"Tempo de conexão esgotado",description:"A conexão com o servidor Git expirou. Isso pode ser causado por firewall, rede lenta ou servidor indisponível."},{pattern:/fatal: Authentication failed/i,title:"Falha na autenticação",description:"Suas credenciais Git estão incorretas ou expiraram. Verifique seu usuário/senha ou token de acesso."},{pattern:/remote: Permission.+denied/i,title:"Permissão negada",description:"Você não tem permissão para acessar este repositório."},{pattern:/fatal: repository.+not found/i,title:"Repositório não encontrado",description:"O repositório não existe ou você não tem acesso a ele."},{pattern:/Your local changes.+would be overwritten by merge/i,title:"Alterações locais conflitantes",description:"Você tem modificações locais que conflitam com as alterações do servidor. Faça commit ou stash das suas alterações antes de continuar."}];function ct(e){const t=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`);for(const{pattern:n,title:o,description:a}of rt){const s=t.match(n);if(s){const i=typeof a=="function"?a(s):a;return{title:o,description:i,originalError:e}}}return{title:st,description:it,originalError:e}}function lt(e){return`
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header error-git-modal-header">
                    <i class="fas fa-times-circle modal-icon"></i>
                    <h3 class="modal-title">${e.title}</h3>
                </div>
                <p class="modal-description">${e.description}</p>
                <p class="modal-description error-git-modal-original-error">${e.originalError}</p>
                <button class="modal-button">OK</button>
            </div>
        </div>
  `}function W(e){S&&(S.remove(),Y(null));const t=ct(e),n=lt(t),o=document.createElement("div");o.innerHTML=n,document.body.appendChild(o),Y(o),o.querySelector(".modal-button").addEventListener("click",()=>{o.remove(),Y(null)})}const ae={BTN_RELOAD:"btnReload",BTN_UPDATE_IP:"btnUpdateIP"};function dt(e){const t=document.getElementById(ae.BTN_RELOAD);t&&T(t,!1);const n=new Set(M);Vt(),Gt(e.apps||[]),Dt(),k(!1),ye(f),G!==null&&n.has(G)&&!M.has(G)&&G<f.length&&(X("Parâmetros salvos com sucesso!"),Ie(null)),e.isInitialLoad===!0&&re(!0),e.isInitialLoad===!0&&e.compactInterface!==void 0&&(ce(e.compactInterface),P("compactInterface",e.compactInterface),qt(e.compactInterface)),R(),Ot(e.email),$t(e.version);const o=document.getElementById("configModal");w&&o&&w(o)}function ut(){k(!0),R(),_t()}function pt(e){const{index:t,env:n,isRunning:o}=e,a=f[t];me(t,n,o),a!=null&&a.environment&&a.environment!==n&&me(t,a.environment,!1),a&&(a.environment=o?n:null)}function mt(e){const{status:t,enabled:n}=e;wt(t,n),ie!==t&&(Ht(t),f.length>0&&ye(f)),we(ae.BTN_UPDATE_IP,()=>{y({action:h.ReleaseIP})})}function ft(e){const t=e.updateAvailable??!1;Mt(t)}function gt(e){if(e.index>=0&&e.index<f.length){const t=f[e.index];if(t.isGitUpdating=e.isUpdating,!e.isUpdating){t.currentBranch=e.branch,t.commits=e.commits;const n=document.querySelector(`#dgvApps tbody tr:nth-child(${e.index+1})`),o=n==null?void 0:n.querySelector(".btn-git-pull");o&&T(o,!1)}ne(e.index,e.isUpdating,e.branch,e.commits)}}function vt(e){Bt(e.index),W(e.message)}function ht(e){J(e.index,e.isLoading,e.isGitUpdating),R()}function bt(e){if(window.currentReloadTimeout&&(clearTimeout(window.currentReloadTimeout),window.currentReloadTimeout=null),W(e.message),q){k(!1);const t=document.getElementById(ae.BTN_RELOAD);t&&T(t,!1),R()}if(e.appIndex>=0&&e.appIndex<f.length){const t=f[e.appIndex];t&&(t.isGitUpdating=!1,Rt(e.appIndex))}}function Et(e,t,n){e.querySelector(".icon-original i").classList.contains("fa-pause")?y({action:h.ToggleEnv,index:t,env:n}):(T(e,!0),y({action:h.ToggleEnv,index:t,env:n}))}function yt(e,t){T(e,!0),y({action:h.PullGit,index:t})}const Tt=Object.keys(He);function ye(e){const t=document.querySelector("#dgvApps tbody");if(!t||!Array.isArray(e))return;const n=t.scrollTop,o=t.scrollLeft;t.innerHTML="",e.forEach((a,s)=>{if(!a||typeof a!="object")return;const i=t.insertRow();Ct(i,"system-name",a,s),St(i,a),At(i,a,s),Lt(i,a,s)}),t.scrollTop=n,t.scrollLeft=o}function Ct(e,t,n,o){const a=e.insertCell();a.className=t;const s=n.name||"Nome Indefinido";n.fileExists?a.textContent=s:a.innerHTML=`
      <span class="system-name-text">${s}</span>
      <span class="icon-container">
        <i class="fas fa-exclamation-circle system-alert-color"></i>
        <div class="tooltip">Sistema não encontrado</div>
      </span>
    `,a.addEventListener("click",()=>{M.has(o)||(J(o,!0,n.isGitUpdating),y({action:n.fileExists?h.OpenVS:h.SelectDirectory,index:o}))})}function St(e,t,n){const o=e.insertCell();if(o.className="branch-name",t.isGitUpdating)o.innerHTML='<span class="branch-loading"><i class="fas fa-spinner icon-spin"></i></span>';else{const a=Pt(t);o.innerHTML=`<span class="branch-text">${a}</span>`}}function At(e,t,n){const o=e.insertCell();if(o.className="git-cell",!t.fileExists){o.innerHTML="--";return}const a=document.createElement("button");a.className="btn btn-git-pull",a.innerHTML='<span class="icon-original"><i class="fas fa-download"></i></span>';const s=!t.currentBranch||t.currentBranch==="--",i=s||t.isGitUpdating;a.disabled=i,a.style.cursor=i?"not-allowed":"pointer";const r=s?"Branch indisponível":t.isGitUpdating?"Atualizando branch":"Atualizar branch",c=document.createElement("div");c.className="tooltip",c.textContent=r,a.appendChild(c),a.addEventListener("mouseenter",()=>c.style.visibility="visible"),a.addEventListener("mouseleave",()=>c.style.visibility="hidden"),a.onclick=()=>yt(a,n),o.appendChild(a)}function Lt(e,t,n){Tt.forEach(o=>{const a=e.insertCell();if(!t.fileExists){a.innerHTML="--";return}if(t[o.toLowerCase()]!==null){const i=t[`is${o}Configured`],r=t.environment===o,c=It(n,o,i,r);a.appendChild(c)}else a.innerHTML="--"})}function It(e,t,n,o){const a=document.createElement("button");a.className="btn btn-icon btn-toggle-env",a.id=`btn-toggle-${e}-${t}`;const{iconClass:s,tooltipText:i,isDisabled:r}=Nt(t,n,o);a.disabled=r,a.style.cursor=r?"not-allowed":"pointer",r&&a.classList.add("ip-blocked-env"),a.innerHTML=`
    <span class="icon-original"><i class="fas ${s}"></i></span>
    <span class="branch-loading dp-none"><i class="fas fa-spinner icon-spin"></i></span>
  `,r||(a.onclick=()=>Et(a,e,t));const c=document.createElement("div");return c.textContent=i,c.className=["Homolog","Prod"].includes(t)?"tooltip-right":"tooltip",a.appendChild(c),a}function Pt(e){return e.currentBranch?e.commits>0?`${e.currentBranch} (${e.commits})`:e.currentBranch:"--"}function Nt(e,t,n){let o,a,s;return t?ie!==I.IpReleased&&["Stage","Homolog","Prod"].includes(e)?(o=n?"fa-pause status-parar":"fa-play status-iniciar",a=Te(),s=!0):(o=n?"fa-pause status-parar":"fa-play status-iniciar",a=n?`Parar ${e}`:`Iniciar ${e}`,s=!1):(o="fa-play status-iniciar",a="Ambiente não configurado",s=!0),{iconClass:o,tooltipText:a,isDisabled:s}}function Te(e){switch(e){case I.IpReleased:return"IP liberado";case I.IpBlocked:return"IP bloqueado";case I.CheckingIp:return"Verificando IP";case I.ReleasingIp:return"Liberando IP";default:return"Desconhecido"}}function ne(e,t,n,o){const a=document.querySelector(`#dgvApps tbody tr:nth-child(${e+1})`);if(!a)return;const s=a.querySelector(".branch-name");if(!s)return;if(t)s.innerHTML='<span class="branch-loading"><i class="fas fa-spinner icon-spin"></i></span>';else{const r=n?o>0?`${n} (${o})`:n:"--";s.innerHTML=`<span class="branch-text">${r}</span>`}const i=a==null?void 0:a.querySelector(".btn-git-pull");if(i){i.disabled=t,i.style.cursor=t?"not-allowed":"pointer";const r=i.querySelector(".tooltip");r&&(r.textContent=t?"Atualizando branch":"Atualizar branch")}}function _t(){document.querySelectorAll("#dgvApps tbody tr").forEach(e=>{const t=e.querySelector(".branch-name");t&&!t.textContent.includes("--")&&(t.innerHTML='<span class="branch-loading"><i class="fas fa-spinner icon-spin"></i></span>')})}function Rt(e){const t=document.querySelector(`#dgvApps tbody tr:nth-child(${e+1})`);if(t){const n=t.querySelector(".branch-name");n&&(n.innerHTML='<span class="branch-text error">--</span>')}}function Bt(e){const t=document.querySelector(`#dgvApps tbody tr:nth-child(${e+1}) .btn-git-pull`);t&&T(t,!1)}function me(e,t,n){const o=`btn-toggle-${e}-${t}`,a=document.getElementById(o);if(a){T(a,!1);const s=n?"fa-pause status-parar":"fa-play status-iniciar";a.querySelector(".icon-original i").className=`fas ${s}`,a.title=n?`Parar ${t}`:`Iniciar ${t}`}}function wt(e,t){const n=document.getElementById("btnUpdateIP");if(!n)return;n.disabled=!t,n.classList.remove("status-success","status-error","status-loading");const o=Te(e);switch(n.setAttribute("data-text",o),e){case I.IpReleased:n.classList.add("status-success"),n.innerHTML=`<i class="fas fa-shield-alt"></i> ${o}`;break;case I.IpBlocked:n.innerHTML=`<i class="fas fa-shield-alt"></i> ${o}`;break;case I.CheckingIp:case I.ReleasingIp:n.classList.add("status-loading"),n.innerHTML=`<i class="fas fa-spinner icon-spin"></i> ${o}`;break}}function Mt(e){const t=document.getElementById("btnUpdateVersion");if(!t)return;const n=e?"Atualizar Sistema":"Sistema Atualizado",o=t.querySelector("i"),s=t.textContent.trim().replace((o==null?void 0:o.outerHTML)||"","").trim()!==n;s&&(t.classList.add("btn-flip"),setTimeout(()=>{t.innerHTML=e?n:`${(o==null?void 0:o.outerHTML)||""} ${n}`},400),setTimeout(()=>t.classList.remove("btn-flip"),800));const i=e!==t.classList.contains("status-fade");(s||i)&&setTimeout(()=>{e?(t.classList.remove("status-success"),t.classList.add("status-fade","fade-border")):(t.classList.remove("status-fade","fade-border"),t.classList.add("status-success"))},s?800:0)}function Ot(e){const t=document.getElementById("txtEmail");t&&(t.value=e||"")}function $t(e){const t=document.querySelector(".version-badge");t&&(t.textContent=e||"v.?.?")}function qt(e){const t=document.querySelector("#compactInterfaceToggle");t&&(t.checked=e)}const oe="not-allowed",se="pointer",Ce="Recarregando dados",Se="Carregando dados",kt="Atualizando dados",Ae="Recarregar dados";let q=!1,S=null,M=new Set,f=[],Le=!1,V=null,C={},G=null,$=!0,xt=new Set,ie="Verificando IP";function k(e){q=e}function Y(e){S=e}function Gt(e){f.length=0,f.push(...e)}function Vt(){f.length=0}function Dt(){M.clear()}function re(e){Le=e}function Ie(e){G=e}function Ht(e){ie=e}function P(e,t){C[e]=t}function ce(e){$=e}function Ut(e){S=e}function J(e,t,n){if(t)M.add(e),ne(e,t,null,null);else{M.delete(e);const o=document.querySelector(`#dgvApps tbody tr:nth-child(${e+1}) .system-name .system-loading`);if(o&&(o.style.display="none"),e>=0&&e<f.length){const a=f[e];a.currentBranch&&`${a.currentBranch}${a.commits??"?"}`,ne(e,!1,a.currentBranch||"--",a.commits)}}}function R(){const e=document.getElementById("btnSettings"),t=document.getElementById("btnReload");V&&(clearTimeout(V),V=null);const n=q||M.size>0,o=!Le,a=f.length>0&&f.every(s=>!s.fileExists);zt(e,Pe(o,n,a),a),Ft(t,o,n,a)}function zt(e,t,n){e&&(e.disabled=t,e.title=t?q?Ce:Se:n?"Configure os caminhos das aplicações":"",e.style.cursor=t?oe:se)}function Ft(e,t,n,o){if(!e)return;const a=Pe(t,n,o),s=e.querySelector('.branch-loading:not([style*="display: none"])');a&&!s?(e.disabled=!0,e.style.cursor=oe,e.innerHTML=`
      <i class="fas fa-sync-alt icon-spin"></i>
      ${t?Se:q?Ce:kt}
    `,jt(e)):!a&&!s&&(T(e,!1),e.disabled=!1,e.style.cursor=se,e.innerHTML=`
      <i class="fas fa-sync-alt"></i>
      ${Ae}
    `)}function jt(e){V=setTimeout(()=>{e&&e.disabled&&e.style.cursor===oe&&(e.querySelector('.branch-loading:not([style*="display: none"])')||(T(e,!1),e.disabled=!1,e.title="",e.style.cursor=se,k(!1),re(!0),e.innerHTML=`
          <i class="fas fa-sync-alt"></i>
          ${Ae}
        `)),V=null},15e3)}function Pe(e,t,n){return(e||t)&&!n}const Wt=`<div class="modal-overlay confirmation-modal" id="unsavedChangesModal">\r
  <div class="modal-content">\r
    <div class="modal-header modal-h-rules">\r
      <div class="alert-container">\r
        <i class="fas fa-exclamation-triangle modal-icon alert-color"></i>\r
        <h3 class="modal-title modal-t-rules">Alterações não salvas</h3>\r
      </div>\r
      <div class="close-container">\r
        <button class="modal-close" id="btnCloseUnsavedModal"><i class="fas fa-times"\r
            data-tippy-content="Fechar"></i></button>\r
      </div>\r
    </div>\r
    <div class="modal-body">\r
      <p class="modal-description">Você tem alterações não salvas. Deseja descartá-las?</p>\r
      <!-- the field list populated by JavaScript -->\r
    </div>\r
    <div class="modal-footer modal-f-rules">\r
      <button class="btn btn-outline" id="btnCancelUnsaved">Cancelar</button>\r
      <button class="btn btn-destructive" id="btnConfirmUnsaved">Descartar Alterações</button>\r
    </div>\r
  </div>\r
</div>`,Jt=`<div class="modal-config" id="configModal">\r
  <div class="modal-content">\r
    <div class="modal-header">\r
      <h3 class="modal-title">Configurações</h3>\r
      <button class="modal-close" id="btnCloseSettings"><i class="fas fa-times"\r
          data-tippy-content="Fechar"></i></button>\r
    </div>\r
    <div class="modal-body">\r
      <div class="modal-fixed-content">\r
        <div class="modal-tabs">\r
          <button class="tab-button active" id="generalTab" data-tab="Geral">\r
            <i class="fa-solid fa-globe"></i> Geral\r
          </button>\r
          <button class="tab-button" id="paramsTab" data-tab="Parâmetros">\r
            <i class="fas fa-cog"></i> Parâmetros\r
          </button>\r
        </div>\r
      </div>\r
      <div class="tab-content">\r
        <div class="tab-panel" id="generalTabContent">\r
          <!-- general tab populated by JavaScript  -->\r
        </div>\r
        <div class="tab-panel dp-none" id="paramsTabContent">\r
          <!-- params tab populated by JavaScript  -->\r
        </div>\r
      </div>\r
    </div>\r
    <div class="modal-footer">\r
      <button class="btn btn-outline" id="btnCancel">Cancelar</button>\r
      <button class="btn btn-primary opc-05" id="btnSaveSettings" disabled>\r
        <i class="fas fa-save"></i> Salvar\r
      </button>\r
    </div>\r
  </div>\r
</div>`,L={GENERAL_TAB:"generalTab",PARAMS_TAB:"paramsTab",GENERAL_TAB_CONTENT:"generalTabContent",PARAMS_TAB_CONTENT:"paramsTabContent",BTN_SAVE_SETTINGS:"btnSaveSettings",BTN_CLOSE_SETTINGS:"btnCloseSettings",BTN_CANCEL:"btnCancel"},U={GERAL:"Geral",PARAMETROS:"Parâmetros"};function Yt(){if(N)return N.show(),N;const e=document.createElement("div");e.innerHTML=Jt,document.body.appendChild(e);const t={element:e,show:()=>e.style.display="block",close:()=>{e.style.display="none",document.body.removeChild(e),ee(null)}},n=e.querySelector(`#${L.GENERAL_TAB_CONTENT}`);n.innerHTML=ze();const o=e.querySelector(`#${L.PARAMS_TAB_CONTENT}`);return o.innerHTML=Qe(),F({container:e}),ee(t),t.show(),Xt(e),t}function Xt(e){const t=e.querySelector(`#${L.GENERAL_TAB}`),n=e.querySelector(`#${L.PARAMS_TAB}`),o=e.querySelector(`#${L.BTN_SAVE_SETTINGS}`),a=e.querySelector(`#${L.BTN_CLOSE_SETTINGS}`),s=e.querySelector(`#${L.BTN_CANCEL}`),i=e.querySelector(".modal-content");Fe(e),Ze(e,le),t.addEventListener("click",()=>fe(U.GERAL,e)),n.addEventListener("click",()=>fe(U.PARAMETROS,e)),o.addEventListener("click",()=>Qt(e)),a.addEventListener("click",()=>ve()),s.addEventListener("click",()=>ve()),e.addEventListener("click",r=>{i.contains(r.target)||r.stopPropagation()}),document.addEventListener("keydown",r=>{r.key==="Escape"&&e.style.display==="block"&&r.preventDefault()})}function fe(e,t){if(t.querySelector(".tab-button.active").dataset.tab===e)return;const o=new Set([...d].filter(a=>a==="appName"||a==="appPath"||a.startsWith("param:")));e===U.GERAL&&o.size>0?le(()=>{Je(o),ge(e,t)},()=>{},o):ge(e,t)}function ge(e,t){const n=t.querySelectorAll(".tab-button"),o=t.querySelectorAll(".tab-panel");n.forEach(a=>{a.classList.toggle("active",a.dataset.tab===e)}),o.forEach(a=>{a.style.display=a.id===(e===U.GERAL?L.GENERAL_TAB_CONTENT:L.PARAMS_TAB_CONTENT)?"block":"none"})}function le(e,t,n=d){if(document.getElementById("unsavedChangesModal"))return;const o=[...n].map(l=>l==="email"?"Email institucional":l==="compactInterface"?"Modo compacto de exibição":l==="appName"?"Nome da Aplicação":l==="appPath"?"Caminho da Aplicação":l.startsWith("param:")?`Parâmetro: ${l.substring(6)}`:l),a=o.length>0?`<p class="modal-subtitle">Campos modificados:</p><ul class="changed-fields-list">${o.map(l=>`<li>${l}</li>`).join("")}</ul>`:"",s=document.createElement("div");s.innerHTML=Wt;const i=s.querySelector(".modal-body");if(i){const l=i.querySelector(".modal-description");l&&l.insertAdjacentHTML("afterend",a)}const r=s.firstElementChild;document.body.appendChild(r);const c={element:r,show:()=>r.style.display="block",close:()=>{r.style.display="none",document.body.removeChild(r)}};c.show();const g=r.querySelector("#btnConfirmUnsaved"),u=r.querySelector("#btnCancelUnsaved"),m=r.querySelector("#btnCloseUnsavedModal");g.addEventListener("click",()=>{c.close(),e()}),u.addEventListener("click",()=>{c.close(),t()}),m.addEventListener("click",()=>{c.close(),t()}),r.addEventListener("click",l=>{r.querySelector(".modal-content").contains(l.target)||l.stopPropagation()}),document.addEventListener("keydown",l=>{l.key==="Escape"&&r.style.display==="block"&&l.preventDefault()}),F({container:r})}function Qt(e){if(d.size===0){z();return}if([...d].some(n=>["email","compactInterface"].includes(n))){const n=je(e),o=document.getElementById("txtEmail");o&&C.email!==n.email&&d.has("email")&&(o.value=n.email,y({action:h.UpdateEmail,email:n.email}),d.delete("email"),X("Email salvo com sucesso!")),C.compactInterface!==n.compactInterface&&d.has("compactInterface")&&(y({action:h.UpdateCompactInterface,enabled:n.compactInterface}),ce(n.compactInterface),P("compactInterface",n.compactInterface),d.delete("compactInterface"),X("Configuração de interface salva com sucesso!"))}if([...d].filter(n=>n==="appName"||n==="appPath"||n.startsWith("param:")).length>0){const n=et(e);if(n){const o=f.findIndex(s=>s.name===n.selectedApp);o!==-1&&(J(o,!0),Ie(o),R());const a={action:h.UpdateConfig,app:{oldName:n.selectedApp,name:n.newName,path:n.newPath,environment:n.selectedEnv,params:n.params}};y(a),d.has("appName")&&d.delete("appName"),d.has("appPath")&&d.delete("appPath"),d.forEach(s=>{s.startsWith("param:")&&d.delete(s)})}}_(),z()}function ve(e){d.size>0?le(()=>{Ye(),z()},()=>{}):z()}function z(e){if(N){N.element.style.display="none";try{document.body.contains(N.element)&&document.body.removeChild(N.element),ee(null)}catch(t){console.warn("Erro ao fechar modal de configurações:",t)}}}const E={DataLoaded:0,ReloadStarted:1,EnvToggled:2,IpStatus:3,VersionStatus:4,GitUpdateStateChanged:5,GitPullError:6,SystemLoading:7,InitialCompactInterface:8,DirectoryActionCompleted:9,VsOpenActionCompleted:10,VsProcessExited:11,GitConnectionError:12},x={RELOAD:"btnReload",UPDATE_IP:"btnAtualizarIP",UPDATE_VERSION:"btnUpdateVersion",SETTINGS:"btnSettings",RELEASE_NOTES:"btnReleaseNotes"},Zt=()=>{Kt(),en(),tn(),nn(),an()},Kt=()=>{const e=document.getElementById(x.RELOAD);e&&e.addEventListener("click",()=>{e.disabled||q||(T(e,!0),k(!0),R(),y({action:h.Reload}))})},en=()=>{const e=document.getElementById(x.UPDATE_IP);e&&e.addEventListener("click",async()=>{if(e.disabled)return;if(!await be()){W("Sem conexão com a internet. Verifique sua rede e tente novamente.");return}T(e,!0),y({action:h.ReleaseIP})})},tn=()=>{const e=document.getElementById(x.UPDATE_VERSION);e&&e.addEventListener("click",async()=>{if(e.disabled)return;if(!await be()){W("Sem conexão com a internet. Verifique sua rede e tente novamente.");return}T(e,!0),y({action:h.UpdateVersion})})},nn=()=>{const e=document.getElementById(x.SETTINGS);e&&e.addEventListener("click",()=>{e.disabled||(S==null||S.close(),Yt())})},an=()=>{const e=document.getElementById(x.RELEASE_NOTES);e&&e.addEventListener("click",()=>{if(e.disabled)return;S==null||S.close();const t=De();t&&(t.show(),Ut(t))})},on=()=>{window.chrome&&window.chrome.webview?window.chrome.webview.addEventListener("message",e=>{const t=e.data;if(t.type!=null){switch(t.type){case E.DataLoaded:dt(t);break;case E.ReloadStarted:ut();break;case E.EnvToggled:pt(t);break;case E.IpStatus:mt(t);break;case E.VersionStatus:ft(t);break;case E.GitUpdateStateChanged:gt(t);break;case E.GitPullError:vt(t);break;case E.GitConnectionError:bt(t);break;case E.SystemLoading:ht(t);break;case E.VsProcessExited:t.index!==void 0&&xt.delete(t.index);break;case E.InitialCompactInterface:ce(t.compactInterface),P("compactInterface",$);const n=document.querySelector("#compactInterfaceToggle");n&&(n.checked=$);break;case E.DirectoryActionCompleted:case E.VsOpenActionCompleted:if(t.index!==void 0&&(J(t.index,!1),t.type===E.DirectoryActionCompleted&&!t.canceled)){const o=document.getElementById(x.RELOAD);T(o,!1),re(!0),k(!1)}break}R()}}):console.warn("WebView não está disponível para configurar o listener de mensagens.")},sn=[{action:h.LoadData},{action:h.ReleaseIP}];function rn(){R(),sn.forEach(y),Zt(),on(),F()}document.addEventListener("DOMContentLoaded",rn);
